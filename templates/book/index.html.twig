{% extends 'base.html.twig' %}

{% block title %}Book index{% endblock %}

{% block body %}
    <h1>Book index</h1>

    {% block books_datatable %}
        {{ vue_data('items', books) }}
        {{ vue_data('headers', [
            { text: 'Id', value: 'id' },
            { text: 'Title', value: 'title' },
            { text: 'PublishedAt', value: 'publishedAt' },
            { text: 'NumberOfPages', value: 'numberOfPages' },
            { text: 'Meta', value: 'meta' },
            { text: '', value: 'actions', sortable: false },
        ]) }}
        {{ vue_data('search', '') }}
        <v-data-table :headers="headers" :items="items" :search="search">
            <template v-slot:top>
                <v-text-field v-model="search" placeholder="Search" prepend-inner-icon="mdi-magnify"></v-text-field>
            </template>
            <template v-slot:item.actions="{ item }">
                <v-btn icon :href="'{{ path('book_show', {'id': '_id_'}) }}'.replace('_id_', item.id)">
                    <v-icon>mdi-eye</v-icon>
                </v-btn>
                <v-btn icon :href="'{{ path('book_edit', {'id': '_id_'}) }}'.replace('_id_', item.id)">
                    <v-icon>mdi-pencil</v-icon>
                </v-btn>
            </template>
        </v-data-table>
    {% endblock %}
    <v-btn color="success" href="{{ path('book_new') }}">Create new</v-btn>

    {{ vue_data('openDialog', false) }}
    <v-btn color="success" @click="openDialog = true">Create new in modal</v-btn>
    <v-dialog v-model="openDialog" width="1200">
        <v-card>
            <v-card-text class="pt-5">
                <sv-fetch url="{{ path('book_new') }}"></sv-fetch>
            </v-card-text>
        </v-card>
    </v-dialog>

{% endblock %}
